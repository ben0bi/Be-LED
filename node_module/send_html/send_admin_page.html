<h1>Be+LED Administration</h1>
<a href="#" onclick="GetResetPassword()" class="button">Set Password</a><br />
<br />
Change the admin password.<br />
<hr />
<br />
<table border="0" style="width:100%">
	<tr>
		<td class="input_field_wrapper"><input id="LED_defaultText" type="text" class="input_field" style="width: 100%"></input></td>
		<td class="button_wrapper"><a href="#" onclick="SetDefaultText()" class="button" class="input_field"><nobr>Set Startup Text</nobr></a></td>
	</tr>
</table>
<br />
The startup text is shown when the server starts, until another text is set.<br />
Hard coded default startup text: <i>by ben0bi@web4me {EmptyHeart} {QuarterHeart} {HalfHeart} {DreiviertelHerz} {Herz} http://ben0bi.homenet.org {:)} {;)} {:)}</i>
<hr />
<br />

Result:
<div id="result">++ Nothing Changed Yet ++</div>

<script>
	
// get the password reset page.
var GetResetPassword = function()
{
	var jqXHR = $.post("http://"+srvr+":"+LEDPort+"/uhsorrymanineedsomepasswordreset",null,function(data,status,xhr) 
	{
		if(data == "N0P3") {
			$("#result").html("The server will not give you that page, sorry.");
		}else if(data == "D0P3"){
			$("#result").html("Something strange is going on. Something really strange.");
		}else if(data=="WRONGPW"){
			$("#result").html("The old password is wrong, sorry.");
		}else{
			// all ok, get password reset page.
			origPass="";
			checkPass="";
			sendpass="";
			$("#wrapper").html(data);
		}
	},"text")
  	.fail(function() {
		$("#result").html("<span class='failtext'>Connection error. The server may not be running.</span>");
  	});
};


// set the default text of the LED array.
var SetDefaultText = function()
{
	var dtext = $("#LED_defaultText").val();
	if(!dtext || dtext=="")
	{
		$("#result").html("You must input at least one character.");
		return;
	}
	
	console.log("Trying to set default text to: "+dtext);
	var jqXHR = $.post("http://"+srvr+":"+LEDPort+"/setdefaulttextxhx",{defaulttext: dtext},function(data,status,xhr) 
	{
		if(data == "N0P3") 
		{
			$("#result").html("The server will not set the default text.");
		}else if(data == "D0P3"){
			$("#result").html("Could not set default text, something strange is going on. Something really strange.");
		}else{
			// all good.
			$("#result").html("Default startup text is now: "+data);
		}
	},"text")
  	.fail(function() {
		$("#result").html("<span class='failtext'>Connection error. The server may not be running.</span>");
	});
};
</script>

